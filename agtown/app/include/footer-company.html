<footer class="cp-footer">
  <div class="container">
    <div class="row">
      <div class="col-lg-9 footer-nav">
        <a href="#">Пользовательское соглашение</a>
        <div class="copyright">
          Сайт создан на платформе AGTOWN &copy; 2018. Все права защищены
        </div>
      </div>
      <div class="col-lg-3 footer-info">
        <div class="logo">
         <a href="#"><img src="img/logo.png" alt="АЛЬТ"></a>
        </div>
      </div>
      <!-- <div class="col-lg-3 footer-social">
        <div class="icons">
          <a href="#"><i class="fa fa-odnoklassniki"></i></a>
          <a href="#"><i class="fa fa-facebook"></i></a>
          <a href="#"><i class="fa fa-instagram"></i></a>
          <a href="#"><i class="fa fa-vk"></i></a>
        </div>
      </div> -->
    </div>
  </div>
</footer>

<link rel="stylesheet" href="css/main.min.css">
<script src="js/scripts.min.js"></script>
<script>
  !function(t){t.extend(t.easing,{spincrementEasing:function(t,a,e,n,r){return a===r?e+n:n*(-Math.pow(2,-10*a/r)+1)+e}}),t.fn.spincrement=function(a){function e(t,a){if(t=t.toFixed(a),a>0&&"."!==r.decimalPoint&&(t=t.replace(".",r.decimalPoint)),r.thousandSeparator)for(;o.test(t);)t=t.replace(o,"$1"+r.thousandSeparator+"$2");return t}var n={from:0,to:null,decimalPlaces:null,decimalPoint:".",thousandSeparator:",",duration:1e3,leeway:50,easing:"spincrementEasing",fade:!0,complete:null},r=t.extend(n,a),o=new RegExp(/^(-?[0-9]+)([0-9]{3})/);return this.each(function(){var a=t(this),n=r.from;a.attr("data-from")&&(n=parseFloat(a.attr("data-from")));var o;if(a.attr("data-to"))o=parseFloat(a.attr("data-to"));else if(null!==r.to)o=r.to;else{var i=t.inArray(r.thousandSeparator,["\\","^","$","*","+","?","."])>-1?"\\"+r.thousandSeparator:r.thousandSeparator,l=new RegExp(i,"g");o=parseFloat(a.text().replace(l,""))}var c=r.duration;r.leeway&&(c+=Math.round(r.duration*(2*Math.random()-1)*r.leeway/100));var s;if(a.attr("data-dp"))s=parseInt(a.attr("data-dp"),10);else if(null!==r.decimalPlaces)s=r.decimalPlaces;else{var d=a.text().indexOf(r.decimalPoint);s=d>-1?a.text().length-(d+1):0}a.css("counter",n),r.fade&&a.css("opacity",0),a.animate({counter:o,opacity:1},{easing:r.easing,duration:c,step:function(t){a.html(e(t*o,s))},complete:function(){a.css("counter",null),a.html(e(o,s)),r.complete&&r.complete(a)}})})}}(jQuery);
</script>

<script>

  $(function() {
    // var h_hght = 60;
    // var h_mrg = 0;
    // $(function(){
    //   var elem = $('.cp-head-wrapper');
    //   var top = $(this).scrollTop();
    //   if(top > h_hght){
    //     elem.css('top', h_mrg);
    //   }           
    //   $(window).scroll(function(){
    //     top = $(this).scrollTop();
    //     if (top+h_mrg < h_hght) {
    //       elem.css('top', (h_hght-top));
    //     } else {
    //       elem.css('top', h_mrg);
    //     }
    //   });
    // });

    $(window).resize(function() {
      if ($(window).width() > 767) {
        $( '.cp-nav nav' ).show();
      }
      else {
        $( '.cp-nav nav' ).hide();
      }
    });

    if ($(window).width() < 767) {
      $( '.cp-menu-toggle, .cp-nav nav a' ).click( function() {
        if ( $( '.cp-nav nav' ).is( ':hidden' ) ) {
          $( '.cp-nav nav' ).slideDown('fast');
        } else {
          $( '.cp-nav nav' ).slideUp('fast');
        }
      });
      $(document).mouseup(function (e) {
        var container = $('.cp-nav nav');
        if (container.has(e.target).length === 0){
          container.slideUp('fast');
        }
      });
    };


    $('.cp-main-slider').slick({
      infinite: true,
      autoplay: true,
      fade: true,
      // autoplaySpeed: 5000,
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      dots: true,
    });

    $('.cp-action-slider').slick({
      infinite: true,
      autoplay: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      arrows: false,
      dots: true,
    });

    $('.cp-review-slider').slick({
      infinite: true,
      slidesToShow: 1,
      slidesToScroll: 1,
      adaptiveHeight: true,
      prevArrow: '<i class="fa fa-angle-left"></i>',
      nextArrow: '<i class="fa fa-angle-right"></i>',
      responsive: [
      {
        breakpoint: 576,
        settings: {
          arrows: false,
        }
      }
      ]
    });


    $("nav").on('click','a[href^="#"]', function (event) {
      event.preventDefault();
      var id  = $(this).attr('href'),
      top = $(id).offset().top;
      $('body,html').animate({scrollTop: top}, 500);
    });

    var show = true;
    var countbox = "#cp-achieves .cp-section-content";
    $(window).on("scroll load resize", function () {
      if (!show) return false;
      var w_top = $(window).scrollTop();
      var e_top = $(countbox).offset().top;
      var w_height = $(window).height();
      var d_height = $(document).height();
      var e_height = $(countbox).outerHeight();
      if (w_top + 500 >= e_top || w_height + w_top == d_height || e_height + e_top < w_height) {
        $('.cp-achieves-number').css('opacity', '1');
        $('.cp-achieves-number').spincrement({
          thousandSeparator: "",
          duration: 1200
        });
        show = false;
      }
    });


    $('.cp-gallery-items').magnificPopup({
      delegate: 'a',
      type: 'image',
      tLoading: 'Загружается изображение #%curr%...',
      mainClass: 'mfp-img-mobile',
      gallery: {
        enabled: true,
        navigateByImgClick: true,
      preload: [0,1] // Will preload 0 - before current, and 1 after the current image
    }
  });

    $('.cp-gallery-all').magnificPopup({
      delegate: 'a',
      type: 'image',
      tLoading: 'Загружается изображение #%curr%...',
      mainClass: 'mfp-img-mobile',
      gallery: {
        enabled: true,
        navigateByImgClick: true,
      preload: [0,1] // Will preload 0 - before current, and 1 after the current image
    }
  });

    $('.cp-shop-buy').click(function(){
      $('.cp-cart-icon').slideDown('fast');
    });


    $( '.message-button' ).click( function() {
      if ( $( '.message-panel' ).is( ':hidden' ) ) {
        $( '.message-panel' ).show();
        $( '.message-button' ).css('margin-right', '-300px');
      } else {
        $( '.message-panel' ).hide();
        $( '.message-button' ).css('margin-right', '0');
      }
    });
    $(document).mouseup(function (e) {
      if ($('.message-panel').has(e.target).length === 0){
        $('.message-panel').hide('fast');
        $( '.message-button' ).css('margin-right', '0');
      }
    });

  });
</script>

<script type="text/javascript">
  var d = document,
    itemBox = d.querySelectorAll('.item_box'), // блок каждого товара
    cartCont = d.getElementById('cart_content'); // блок вывода данных корзины
// Функция кроссбраузерная установка обработчика событий
function addEvent(elem, type, handler){
  if(elem.addEventListener){
    elem.addEventListener(type, handler, false);
  } else {
    elem.attachEvent('on'+type, function(){ handler.call( elem ); });
  }
  return false;
}
// Получаем данные из LocalStorage
function getCartData(){
  return JSON.parse(localStorage.getItem('cart'));
}
// Записываем данные в LocalStorage
function setCartData(o){
  localStorage.setItem('cart', JSON.stringify(o));
  return false;
}
// Добавляем товар в корзину
function addToCart(e){
  this.disabled = true; // блокируем кнопку на время операции с корзиной
  var cartData = getCartData() || {}, // получаем данные корзины или создаём новый объект, если данных еще нет
      parentBox = this.parentNode, // родительский элемент кнопки &quot;Добавить в корзину&quot;
      itemId = this.getAttribute('data-id'), // ID товара
      itemTitle = parentBox.querySelector('.item_title').innerHTML, // название товара
      itemPrice = parentBox.querySelector('.item_price').innerHTML; // стоимость товара
  if(cartData.hasOwnProperty(itemId)){ // если такой товар уже в корзине, то добавляем +1 к его количеству
    cartData[itemId][2] += 1;
  } else { // если товара в корзине еще нет, то добавляем в объект
    cartData[itemId] = [itemTitle, itemPrice, 1];
  }
  // Обновляем данные в LocalStorage
  if(!setCartData(cartData)){ 
    this.disabled = false; // разблокируем кнопку после обновления LS
    cartCont.innerHTML = 'Товар добавлен в корзину.';
    setTimeout(function(){
      cartCont.innerHTML = 'Товар еще не долетел до корзины...';
    }, 500);
  }
  return false;
}
// Устанавливаем обработчик события на каждую кнопку &quot;Добавить в корзину&quot;
for(var i = 0; i < itemBox.length; i++){
  addEvent(itemBox[i].querySelector('.add_item'), 'click', addToCart);
}
// Открываем корзину со списком добавленных товаров
function openCart(e){

  var cartData = getCartData(), // вытаскиваем все данные корзины
  totalItems = '';
  console.log(JSON.stringify(cartData));
  // если что-то в корзине уже есть, начинаем формировать данные для вывода
  if(cartData !== null){
    totalItems = '<table class="shopping_list"><tr><th>Наименование</th><th>Цена</th><th>Кол-во</th></tr>';
    for(var items in cartData){
      totalItems += '<tr class="cart_item">';
      for(var i = 0; i < cartData[items].length; i++){
        totalItems += '<td>' + cartData[items][i] + '</td>';
      }
      totalItems += '</tr>';
    }
    totalItems += '<tr> <td>Итого</td> <td id="cartPriceSum"></td> <td id="cartValSum"></td> </tr></table>';
    cartCont.innerHTML = totalItems;
  } else {
    // если в корзине пусто, то сигнализируем об этом
    cartCont.innerHTML = 'В корзине пусто!';
  }

  var cartPriceSum=0;
  $("#cart_content .cart_item").each(function() {
    var mn=$(this).find('td');                      
    cartPriceSum += (+mn.eq(1).text())*(+mn.eq(2).text());
    // cartPriceSum+=parseFloat($(this).find("td:nth-child(2)").text());
  });
  $("#cartPriceSum").text(cartPriceSum);

  var cartValSum=0;
  $("#cart_content .cart_item").each(function() {
    cartValSum+=parseFloat($(this).find("td:nth-child(3)").text());
  });
  $("#cartValSum").text(cartValSum);

  $("#val_cart").text(cartValSum);

  return false;
}
/* Открыть корзину */
$( '.cp-shop-buy, #checkout' ).click(openCart);
// addEvent(d.getElementById('checkout'), 'click', openCart);
/* Очистить корзину */
$( '#clear_cart' ).click(function(e) {
  localStorage.removeItem('cart');
  alert ('Корзина очищена.'); 
});
// addEvent(d.getElementById('clear_cart'), 'click', function(e){
//   localStorage.removeItem('cart');
//   cartCont.innerHTML = 'Корзина очищена.';  
// });

// Иконка корзины
window.onload = openCart;
checkCart = localStorage.getItem('cart');
if(checkCart !== null) {
  $('.cp-cart-icon').show();
}
</script>

</body>
</html>